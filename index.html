<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ—æµ·é“è–èª•ä¹‹æ—… 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        #map { height: 100%; width: 100%; z-index: 1; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .activity-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .activity-card.active {
            border-left-width: 8px;
            transform: translateX(4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .day-btn.active {
            background: white;
            color: #1d4ed8;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 overflow-hidden h-screen flex flex-col">

    <!-- Header -->
    <header class="z-50 px-6 py-4 flex justify-between items-center bg-white/90 backdrop-blur-md border-b border-blue-100 shadow-sm flex-shrink-0">
        <div>
            <h1 class="text-2xl md:text-3xl font-black bg-gradient-to-r from-blue-700 to-cyan-500 bg-clip-text text-transparent flex items-center">
                â„ï¸ åŒ—æµ·é“è–èª•ä¹‹æ—…
            </h1>
            <p class="text-xs md:text-sm text-slate-500 font-medium flex items-center mt-1">
                ğŸ“… 2025/12/25 - 12/30
            </p>
        </div>
        
        <!-- Desktop Day Selector -->
        <div id="day-selector-desktop" class="hidden md:flex space-x-2 bg-blue-50/50 p-1 rounded-full border border-blue-100">
            <!-- Buttons injected by JS -->
        </div>
    </header>

    <main class="flex flex-col md:flex-row flex-1 overflow-hidden">
        
        <!-- Sidebar: Itinerary List -->
        <div class="w-full md:w-[400px] lg:w-[450px] overflow-y-auto custom-scrollbar border-r border-blue-50 flex flex-col bg-white/50 backdrop-blur-sm z-10">
            
            <!-- Mobile Day Selector -->
            <div id="day-selector-mobile" class="md:hidden p-4 overflow-x-auto whitespace-nowrap bg-white/80 sticky top-0 z-20 border-b border-slate-100">
                <!-- Buttons injected by JS -->
            </div>

            <div class="p-6">
                <div id="day-header" class="mb-8">
                    <span id="day-label" class="inline-block px-3 py-1 rounded-full bg-cyan-100 text-cyan-700 text-[10px] font-black uppercase tracking-widest mb-2"></span>
                    <h2 id="day-title" class="text-2xl font-black text-slate-800 tracking-tight"></h2>
                    <p id="day-date" class="text-blue-500 font-bold text-sm mt-1"></p>
                </div>

                <div id="activities-container" class="space-y-6 relative pl-2">
                    <!-- Activities injected by JS -->
                    <div id="timeline-line" class="absolute left-[1.1rem] top-4 bottom-4 w-0.5 bg-gradient-to-b from-blue-400 via-blue-200 to-transparent"></div>
                </div>
            </div>
        </div>

        <!-- Map Container -->
        <div class="flex-1 relative h-full">
            <div id="map"></div>
            <!-- Map Overlay Info -->
            <div id="map-info" class="absolute bottom-6 left-1/2 -translate-x-1/2 md:left-auto md:right-6 md:translate-x-0 w-[90%] md:w-72 glass-panel p-4 rounded-2xl shadow-2xl border border-white z-[1000] hidden animate-bounce-short">
                <!-- Info injected by JS on hover -->
            </div>
        </div>
    </main>

    <script>
        const ITINERARY_DATA = [
            {
                day: 1, date: "12æœˆ25æ—¥ (å››)", title: "æŠµé”æœ­å¹Œ & è–èª•æ°£æ°›", region: [43.062, 141.354], zoom: 13,
                activities: [
                    { id: '1-1', time: '14:20', type: 'plane', title: 'æŠµé”æ–°åƒæ­²æ©Ÿå ´ (CTS)', location: 'New Chitose Airport', address: 'Bibi, Chitose, Hokkaido 066-0012', coords: [42.787, 141.681] },
                    { id: '1-2', time: '16:30', type: 'hotel', title: 'Check-in: Hotel Emion Sapporo', location: 'Hotel Emion Sapporo', address: 'åŒ—æµ·é“æœ­å¹Œå¸‚åŒ—åŒºåŒ—8æ¡è¥¿1ä¸ç›®', coords: [43.070, 141.353] },
                    { id: '1-3', time: '18:30', type: 'food', title: 'æ™šé¤: æ ¹å®¤èŠ±ä¸¸è¿´è½‰å£½å¸', location: 'JR Tower Stella Place 6F', address: 'åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®åŒºåŒ—5æ¡è¥¿2ä¸ç›®', coords: [43.068, 141.350] },
                    { id: '1-4', time: '20:00', type: 'sightseeing', title: 'æœ­å¹Œæ…•å°¼é»‘è–èª•å¸‚é›† ğŸ„', location: 'å¤§é€šå…¬åœ’ 2 ä¸ç›®', address: 'åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®åŒºå¤§é€šè¥¿2ä¸ç›®', coords: [43.060, 141.354] }
                ]
            },
            {
                day: 2, date: "12æœˆ26æ—¥ (äº”)", title: "å°æ¨½æµªæ¼«ä¸€æ—¥éŠ", region: [43.190, 141.000], zoom: 14,
                activities: [
                    { id: '2-1', time: '09:30', type: 'transport', title: 'JR æœ­å¹Œ â†’ å°æ¨½', location: 'JR Otaru Station', address: 'Inaho 2-chome, Otaru', coords: [43.197, 140.993] },
                    { id: '2-2', time: '10:00', type: 'food', title: 'ã€é è¨‚ã€‘ã†ã«å°‚é–€åº—ä¸–å£±å±‹ (æµ·è†½)', location: 'ä¸–å£±å±‹ å°æ¨½é‹æ²³åº—', address: 'åŒ—æµ·é“å°æ¨½å¸‚è‰²å†…1ä¸ç›®2-17', coords: [43.200, 141.002] },
                    { id: '2-3', time: '10:30', type: 'sightseeing', title: 'æ¼«æ­¥å°æ¨½é‹æ²³', location: 'Otaru Canal', address: 'Minatomachi, Otaru, Hokkaido 047-0007', coords: [43.201, 141.003] },
                    { id: '2-4', time: '11:30', type: 'photo', title: 'èˆ¹è¦‹å‚ (è‘—åæ”å½±é»)', location: 'Funamizaka Slope', address: 'Sumiyoshicho, Otaru, Hokkaido 047-0015', coords: [43.197, 140.994] },
                    { id: '2-5', time: '13:00', type: 'sightseeing', title: 'å°æ¨½å¤©ç‹—å±±è§€æ™¯è‡º', location: 'Otaru Tenguyama Ropeway', address: 'Mogami 3-2-2, Otaru, Hokkaido 047-0023', coords: [43.1978, 140.9507] },
                    { id: '2-6', time: '16:30', type: 'transport', title: 'JR å°æ¨½ â†’ æœ­å¹Œ', location: 'JR Sapporo Station', address: 'Kita 6 Jonishi 4-chome, Sapporo', coords: [43.068, 141.350] },
                    { id: '2-7', time: '18:30', type: 'food', title: 'æ™šé¤: ç‹¸å°è·¯å•†åº—è¡—', location: 'Tanukikoji Shopping Arcade', address: 'Minami 2 Jonishi, Chuo Ward, Sapporo', coords: [43.057, 141.352] }
                ]
            },
            {
                day: 3, date: "12æœˆ27æ—¥ (å…­)", title: "è‡ªé§•ï¼šæœ­å¹Œ â†’ ç¾ç‘›è³é›ªæ™¯", region: [43.600, 142.500], zoom: 10,
                activities: [
                    { id: '3-1', time: '09:30', type: 'car', title: 'Nippon Rent-A-Car æ”è»Š', location: 'Sapporo Station Office', address: 'æœ­å¹Œå¸‚åŒ—åŒºåŒ—ï¼—æ¡è¥¿ï¼‘ä¸ç›®ï¼‘ï¼ï¼’', coords: [43.069, 141.354] },
                    { id: '3-2', time: '12:30', type: 'food', title: 'åˆé¤: Farm Restaurant Chiyoda', location: 'åƒä»£ç”°ãƒ•ã‚¡ãƒ¼ãƒ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³', address: 'ç¾ç‘›ç”ºå­—åƒä»£ç”° å”ç”Ÿ', coords: [43.639, 142.493] },
                    { id: '3-3', time: '14:30', type: 'photo', title: 'è–èª•æ¨¹ä¹‹æœ¨ (Christmas Tree)', location: 'ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ„ãƒªãƒ¼ã®æœ¨', address: 'Biei, Kamikawa District, Hokkaido 071-0474', coords: [43.636, 142.427] },
                    { id: '3-4', time: '16:30', type: 'photo', title: 'ç™½é‡‘é’æ±  (å¤œé–“é»ç‡ˆ)', location: 'Shirogane Blue Pond', address: 'Shirogane, Biei, Kamikawa District', coords: [43.493, 142.614] },
                    { id: '3-5', time: '17:30', type: 'sightseeing', title: 'ç™½é¬šç€‘å¸ƒ (ç™½ã²ã’ã®æ»)', location: 'Shirahige Waterfall', address: 'Shirogane, Biei, Kamikawa District', coords: [43.475, 142.639] },
                    { id: '3-6', time: '19:00', type: 'hotel', title: 'Check-in: La Vista å¤§é›ªå±±', location: 'La Vista Daisetsuzan', address: 'Higashikawa, Kamikawa District, Hokkaido', coords: [43.655, 142.827] }
                ]
            },
            {
                day: 4, date: "12æœˆ28æ—¥ (æ—¥)", title: "æ—­å²³é›ªæ™¯ & å¯Œè‰¯é‡", region: [43.550, 142.600], zoom: 10,
                activities: [
                    { id: '4-1', time: '09:30', type: 'sightseeing', title: 'æ—­å²³çºœè»Š (é›ªå±±/æ¨¹å†°)', location: 'Asahidake Ropeway', address: 'Higashikawa, Kamikawa District', coords: [43.663, 142.823] },
                    { id: '4-2', time: '12:00', type: 'food', title: 'åˆé¤ @ ç¾ç‘›é¸æœ', location: 'Biei Senka', address: 'Omachi 2-chome, Biei', coords: [43.590, 142.463] },
                    { id: '4-3', time: '14:30', type: 'shopping', title: 'Ningle Terrace æ£®æ—ç²¾éˆéœ²å°', location: 'New Furano Prince Hotel', address: 'Nakagoryo, Furano, Hokkaido 076-8511', coords: [43.340, 142.421] },
                    { id: '4-4', time: '18:30', type: 'hotel', title: 'è¿”é…’åº—å˜†æº«æ³‰/æ™šé¤', location: 'La Vista Daisetsuzan', address: 'Higashikawa', coords: [43.655, 142.827] }
                ]
            },
            {
                day: 5, date: "12æœˆ29æ—¥ (ä¸€)", title: "æ—­å±±å‹•ç‰©åœ’ & å¤§é»‘å±‹", region: [43.770, 142.400], zoom: 12,
                activities: [
                    { id: '5-1', time: '11:00', type: 'sightseeing', title: 'æ—­å±±å‹•ç‰©åœ’ (ä¼éµæ•£æ­¥)', location: 'Asahiyama Zoo', address: 'Kuranuma Higashiasahikawacho, Asahikawa', coords: [43.768, 142.479] },
                    { id: '5-2', time: '14:00', type: 'shopping', title: 'Aeon Mall æ—­å·è¥¿åº—', location: 'Aeon Mall Asahikawa Nishi', address: '23-216-1 Midorimachi, Asahikawa', coords: [43.791, 142.327] },
                    { id: '5-3', time: '16:00', type: 'food', title: 'ã€é è¨‚ã€‘å¤§é»‘å±‹ (æˆå‰æ€æ±—)', location: 'Daikokuya Genghis Khan', address: '4-chome, 5 Jo-dori, Asahikawa', coords: [43.766, 142.365] },
                    { id: '5-4', time: '20:00', type: 'car', title: 'æœ­å¹Œé‚„è»Š', location: 'Nippon Rent-A-Car Sapporo', address: 'æœ­å¹Œå¸‚åŒ—åŒºåŒ—ï¼—æ¡è¥¿ï¼‘ä¸ç›®ï¼‘ï¼ï¼’', coords: [43.069, 141.354] },
                    { id: '5-5', time: '20:30', type: 'hotel', title: 'Hotel Emion Sapporo', location: 'Hotel Emion', address: 'æœ­å¹Œå¸‚åŒ—åŒºåŒ—8æ¡è¥¿1ä¸ç›®', coords: [43.070, 141.353] }
                ]
            },
            {
                day: 6, date: "12æœˆ30æ—¥ (äºŒ)", title: "å›ç¨‹é¦™æ¸¯", region: [42.900, 141.500], zoom: 10,
                activities: [
                    { id: '6-1', time: '10:00', type: 'hotel', title: 'Check-out', location: 'Hotel Emion', address: 'æœ­å¹Œå¸‚åŒ—åŒºåŒ—8æ¡è¥¿1ä¸ç›®', coords: [43.070, 141.353] },
                    { id: '6-2', time: '15:20', type: 'plane', title: 'é£›è¿”é¦™æ¸¯ (HX691)', location: 'New Chitose Airport', address: 'Chitose, Hokkaido', coords: [42.787, 141.681] }
                ]
            }
        ];

        let activeDay = 1;
        let map, markers = [], routeLine;

        function initMap() {
            map = L.map('map', { zoomControl: false }).setView(ITINERARY_DATA[0].region, ITINERARY_DATA[0].zoom);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; CARTO'
            }).addTo(map);
            L.control.zoom({ position: 'bottomright' }).addTo(map);
            renderDay(1);
        }

        function getIcon(type) {
            const colors = {
                plane: 'text-blue-500', food: 'text-rose-500', hotel: 'text-purple-500',
                sightseeing: 'text-cyan-500', shopping: 'text-pink-500', transport: 'text-indigo-500',
                car: 'text-orange-500', photo: 'text-amber-500'
            };
            const icons = {
                plane: 'âœˆï¸', food: 'ğŸ´', hotel: 'ğŸ ', sightseeing: 'ğŸ“¸',
                shopping: 'ğŸ›ï¸', transport: 'ğŸšƒ', car: 'ğŸš—', photo: 'ğŸ“·'
            };
            return `<span class="${colors[type] || 'text-slate-400'}">${icons[type] || 'ğŸ“'}</span>`;
        }

        function getAccentColor(type) {
            const mapping = {
                food: 'border-l-rose-500', sightseeing: 'border-l-cyan-500',
                hotel: 'border-l-purple-500', shopping: 'border-l-pink-500',
                photo: 'border-l-amber-500', car: 'border-l-orange-500'
            };
            return mapping[type] || 'border-l-blue-500';
        }

        function renderDay(dayNum) {
            activeDay = dayNum;
            const data = ITINERARY_DATA.find(d => d.day === dayNum);
            
            // Update Text
            document.getElementById('day-label').innerText = `DAY ${data.day}`;
            document.getElementById('day-title').innerText = data.title;
            document.getElementById('day-date').innerText = data.date;

            // Render Activity Cards
            const container = document.getElementById('activities-container');
            const timeline = document.getElementById('timeline-line');
            container.innerHTML = '';
            container.appendChild(timeline);

            data.activities.forEach((act, idx) => {
                const card = document.createElement('div');
                card.className = `activity-card relative flex group cursor-pointer mb-8`;
                card.innerHTML = `
                    <div class="absolute left-0 w-10 h-10 rounded-full bg-white border-2 border-blue-100 text-blue-500 flex items-center justify-center z-10 font-black shadow-sm group-hover:bg-blue-600 group-hover:text-white transition-all">
                        ${idx + 1}
                    </div>
                    <div class="ml-14 flex-1 glass-panel p-4 rounded-2xl border-l-[6px] ${getAccentColor(act.type)} shadow-sm border border-slate-100 hover:shadow-md transition-all">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[10px] font-bold px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 flex items-center">
                                ğŸ•’ ${act.time}
                            </span>
                            ${getIcon(act.type)}
                        </div>
                        <h3 class="font-bold text-slate-800">${act.title}</h3>
                        <p class="text-[11px] text-slate-500 mt-1 flex items-center">ğŸ“ ${act.location}</p>
                        <div class="hidden group-hover:block mt-2 text-[10px] bg-blue-50/50 p-2 rounded-lg text-blue-700 leading-tight">
                            ${act.address}
                        </div>
                    </div>
                `;
                card.onclick = () => {
                    map.flyTo(act.coords, 15);
                    document.querySelectorAll('.activity-card').forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                };
                container.appendChild(card);
            });

            // Update Map
            markers.forEach(m => map.removeLayer(m));
            markers = [];
            if (routeLine) map.removeLayer(routeLine);

            const coords = data.activities.map(a => a.coords);
            routeLine = L.polyline(coords, { color: '#0ea5e9', weight: 4, opacity: 0.5, dashArray: '5, 10' }).addTo(map);

            data.activities.forEach(act => {
                const marker = L.marker(act.coords).addTo(map)
                    .bindPopup(`<div class="p-1"><strong>${act.title}</strong><br><small>${act.location}</small></div>`);
                markers.push(marker);
            });

            map.flyTo(data.region, data.zoom);
            updateSelectors();
        }

        function updateSelectors() {
            const desktop = document.getElementById('day-selector-desktop');
            const mobile = document.getElementById('day-selector-mobile');
            desktop.innerHTML = '';
            mobile.innerHTML = '';

            ITINERARY_DATA.forEach(d => {
                const btnClass = `px-4 py-1.5 rounded-full text-xs font-bold transition-all day-btn ${activeDay === d.day ? 'active' : 'text-slate-500 hover:bg-white/50'}`;
                
                const dBtn = document.createElement('button');
                dBtn.className = btnClass;
                dBtn.innerText = `Day ${d.day}`;
                dBtn.onclick = () => renderDay(d.day);
                desktop.appendChild(dBtn);

                const mBtn = document.createElement('button');
                mBtn.className = `inline-block px-5 py-2 mr-2 rounded-full text-xs font-bold shadow-sm ${activeDay === d.day ? 'bg-blue-600 text-white' : 'bg-white text-slate-600 border border-slate-100'}`;
                mBtn.innerText = `D${d.day}`;
                mBtn.onclick = () => renderDay(d.day);
                mobile.appendChild(mBtn);
            });
        }

        window.onload = initMap;
    </script>
</body>
</html>